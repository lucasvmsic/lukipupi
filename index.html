<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover">
  <title>Ba√±os Morales ‚Äî Juego de Pareja</title>
  <style>
    :root{
      color-scheme: dark;

      --bg0:#070A12;
      --bg1:#0A1630;

      --glass: rgba(255,255,255,0.10);
      --glass2: rgba(255,255,255,0.12);
      --stroke: rgba(255,255,255,0.14);

      --shadow: 0 22px 70px rgba(0,0,0,0.45);
      --shadow2: 0 14px 44px rgba(0,0,0,0.40);

      --txt: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.76);

      --a: rgba(147,197,253,0.95);
      --b: rgba(134,239,172,0.95);
      --c: rgba(196,181,253,0.95);
      --p: rgba(251,182,206,0.95);
      --gold: rgba(253, 230, 138, 0.95);
    }

    *{ box-sizing: border-box; }
    html, body{
      margin:0; padding:0; width:100%;
      background: radial-gradient(1200px 1200px at 50% 16%, #0b2a4d 0%, var(--bg0) 56%, #04050a 100%);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color:#fff;
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior: none;
    }
    body{ min-height: 100vh; }
    @supports (height: 100dvh){ body{ min-height: 100dvh; } }

    .bg{
      position:fixed; inset:0;
      background:
        radial-gradient(1000px 820px at 50% 14%, rgba(147,197,253,0.18), rgba(0,0,0,0.74)),
        radial-gradient(900px 760px at 20% 92%, rgba(251,182,206,0.12), transparent 65%),
        url("assets/menu/bg.jpg");
      background-size: cover;
      background-position: center;
      filter: saturate(1.02) contrast(1.02);
      transform: scale(1.02);
      will-change: transform;
    }
    .bg::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,0.15), rgba(0,0,0,0.72));
      pointer-events:none;
    }

    .snow{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:0.16;
      background-image:
        radial-gradient(2px 2px at 20% 10%, rgba(255,255,255,.9) 60%, transparent 61%),
        radial-gradient(2px 2px at 70% 30%, rgba(255,255,255,.7) 60%, transparent 61%),
        radial-gradient(1.6px 1.6px at 40% 60%, rgba(255,255,255,.6) 60%, transparent 61%),
        radial-gradient(1.8px 1.8px at 85% 75%, rgba(255,255,255,.8) 60%, transparent 61%),
        radial-gradient(1.4px 1.4px at 10% 85%, rgba(255,255,255,.65) 60%, transparent 61%);
      background-size: 520px 520px;
      animation: snowMove 10s linear infinite;
      filter: blur(0.2px);
    }
    @keyframes snowMove { from { transform: translateY(-28px); } to { transform: translateY(28px); } }
    @media (prefers-reduced-motion: reduce){ .snow{ animation:none; } }

    .app{
      position: relative;
      width: min(520px, 100%);
      margin: 0 auto;
      min-height: 100vh;
      padding:
        calc(12px + env(safe-area-inset-top, 0))
        12px
        calc(14px + env(safe-area-inset-bottom, 0));
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    @supports (height: 100svh){ .app{ min-height: 100svh; } }
    @supports (height: 100dvh){ .app{ min-height: 100dvh; } }

    .header{
      border-radius: 22px;
      background: rgba(255,255,255,0.10);
      border: 1px solid var(--stroke);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: var(--shadow2);
      padding: 14px 14px 12px;
      overflow:hidden;
    }
    .titleRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }
    .hTitle{
      margin:0;
      font-weight: 1000;
      font-size: 20px;
      line-height: 1.10;
      letter-spacing: .2px;
      text-shadow: 0 14px 34px rgba(0,0,0,0.35);
    }
    .pill{
      flex: 0 0 auto;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.22);
      font-weight: 950;
      font-size: 11px;
      letter-spacing: .10em;
      text-transform: uppercase;
      white-space: nowrap;
    }
    .sub{
      margin: 10px 0 0;
      color: var(--muted);
      font-weight: 760;
      font-size: 13px;
      line-height: 1.35;
    }
    .sub b{ color: var(--txt); }

    .progress{
      margin-top: 12px;
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .progOuter{
      flex: 1 1 auto;
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.12);
      overflow:hidden;
    }
    .progInner{
      height:100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--p), var(--a), var(--b), var(--c));
      transition: width 260ms ease;
    }
    .progText{
      font-weight: 950;
      font-size: 11px;
      letter-spacing: .10em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.86);
      white-space: nowrap;
    }

    .list{
      flex: 1 1 auto;
      display:flex;
      flex-direction:column;
      gap: 12px;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
      padding-bottom: 6px;
      overscroll-behavior: contain;
    }
    .list::-webkit-scrollbar{ width:0; height:0; }

    .card{
      position:relative;
      border-radius: 22px;
      overflow:hidden;
      background: rgba(0,0,0,0.20);
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: var(--shadow2);
      min-height: 182px;
      transform: translateZ(0);
    }
    .thumb{
      position:absolute; inset:0;
      background-size: cover;
      background-position: center;
      transform: scale(1.03);
      opacity: 0.90;
      filter: saturate(1.03) contrast(1.02);
    }
    .shade{
      position:absolute; inset:0;
      background:
        radial-gradient(900px 520px at 50% 18%, rgba(147,197,253,0.16), transparent 62%),
        radial-gradient(900px 520px at 18% 92%, rgba(251,182,206,0.12), transparent 66%),
        linear-gradient(180deg, rgba(0,0,0,0.06), rgba(0,0,0,0.78));
      pointer-events:none;
    }
    .cardInner{
      position:relative;
      height:100%;
      padding: 14px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap: 10px;
    }
    .tagRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .tag{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.12);
      font-weight: 950;
      font-size: 12px;
      letter-spacing: .04em;
      color: var(--txt);
    }
    .state{
      font-weight: 950;
      font-size: 11px;
      letter-spacing: .10em;
      text-transform: uppercase;
      background: rgba(0,0,0,0.34);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 8px 10px;
      border-radius: 999px;
      white-space: nowrap;
      color: rgba(255,255,255,0.90);
    }

    .cTitle{
      margin: 0;
      font-size: 19px;
      font-weight: 1000;
      line-height: 1.06;
      text-shadow: 0 14px 34px rgba(0,0,0,0.42);
    }
    .cDesc{
      margin: 6px 0 0;
      font-size: 13px;
      font-weight: 760;
      line-height: 1.35;
      color: rgba(255,255,255,0.88);
    }

    .btnRow{ display:flex; gap: 10px; align-items:center; }
    .btn{
      width: 100%;
      border: 0;
      cursor: pointer;
      border-radius: 16px;
      padding: 12px 14px;
      font-weight: 1000;
      font-size: 14px;
      background: rgba(255,255,255,0.95);
      color: #0b1220;
      box-shadow: 0 16px 44px rgba(0,0,0,0.42);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      text-decoration: none;
      user-select: none;
      touch-action: manipulation;
      transition: transform 120ms ease, opacity 120ms ease, filter 120ms ease;
    }
    .btn:active{ transform: translateY(1px); }
    .btn.ghost{
      background: rgba(255,255,255,0.10);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.16);
      box-shadow: none;
    }
    .btn.locked{
      opacity: 0.62;
      filter: grayscale(0.2);
    }

    .card.locked .thumb{ filter: saturate(0.9) contrast(0.95) blur(0.2px); opacity: 0.72; }
    .card.locked .shade{ background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.86)); }
    .card.locked::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(900px 520px at 50% 30%, rgba(0,0,0,0.0), rgba(0,0,0,0.25));
      pointer-events:none;
    }

    .footer{
      text-align:center;
      opacity: 0.88;
      font-weight: 760;
      font-size: 12px;
      color: rgba(255,255,255,0.82);
      padding-bottom: 2px;
    }

    /* Gift big button card */
    .giftCard{
      border-radius: 22px;
      overflow:hidden;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: var(--shadow2);
      padding: 14px;
      position: relative;
    }
    .giftGlow{
      position:absolute; inset:-80px;
      background:
        radial-gradient(600px 320px at 20% 30%, rgba(253,230,138,0.22), transparent 60%),
        radial-gradient(700px 420px at 80% 60%, rgba(251,182,206,0.14), transparent 62%),
        radial-gradient(600px 420px at 60% 10%, rgba(196,181,253,0.10), transparent 62%);
      filter: blur(0.2px);
      pointer-events:none;
    }
    .giftRow{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .giftTitle{
      margin:0;
      font-weight: 1000;
      font-size: 16px;
      letter-spacing: .2px;
    }
    .giftSub{
      margin:6px 0 0;
      opacity:.86;
      font-weight: 760;
      font-size: 13px;
      line-height: 1.35;
    }
    .giftBtn{
      flex: 0 0 auto;
      padding: 12px 14px;
      border-radius: 16px;
      border: 0;
      cursor: pointer;
      font-weight: 1000;
      font-size: 14px;
      color: #0b1220;
      background: rgba(255,255,255,0.95);
      box-shadow: 0 16px 44px rgba(0,0,0,0.42);
      display:inline-flex;
      align-items:center;
      gap: 10px;
      user-select:none;
      touch-action: manipulation;
      transition: transform 120ms ease, opacity 120ms ease, filter 120ms ease;
    }
    .giftBtn:active{ transform: translateY(1px); }
    .giftBtn.locked{ opacity: 0.55; filter: grayscale(0.25); cursor: not-allowed; }

    /* Overlay modal */
    .overlay{
      position: fixed; inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      background: rgba(0,0,0,0.62);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      z-index: 999;
    }
    .overlay.on{ display:flex; }

    .modal{
      width: min(520px, 92vw);
      border-radius: 24px;
      background: var(--glass2);
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: var(--shadow);
      padding: 16px 14px 14px;
      text-align:center;
      position: relative;
      overflow:hidden;
    }
    .modal h2{
      margin: 6px 0 10px;
      font-size: 26px;
      font-weight: 1000;
      line-height: 1.05;
    }
    .modal p{
      margin: 0 0 14px;
      opacity: 0.92;
      font-weight: 760;
      line-height: 1.35;
    }
    .modalBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width: 100%;
      padding: 12px 14px;
      border-radius: 16px;
      border: 0;
      cursor: pointer;
      background: rgba(255,255,255,0.95);
      color: #0b1220;
      font-weight: 1000;
      font-size: 16px;
      box-shadow: 0 16px 44px rgba(0,0,0,0.42);
      user-select:none;
      touch-action: manipulation;
    }
    .modalBtn:active{ transform: translateY(1px); }

    /* Gift animation */
    .sparkles{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0;
      background:
        radial-gradient(3px 3px at 20% 25%, rgba(255,255,255,.95) 60%, transparent 61%),
        radial-gradient(3px 3px at 70% 20%, rgba(255,255,255,.80) 60%, transparent 61%),
        radial-gradient(2px 2px at 30% 60%, rgba(255,255,255,.75) 60%, transparent 61%),
        radial-gradient(2px 2px at 84% 70%, rgba(255,255,255,.90) 60%, transparent 61%),
        radial-gradient(2px 2px at 55% 82%, rgba(255,255,255,.78) 60%, transparent 61%),
        radial-gradient(2px 2px at 12% 78%, rgba(255,255,255,.70) 60%, transparent 61%);
      background-size: 520px 520px;
      transform: translateY(-8px);
    }
    .modal.reveal .sparkles{
      opacity: 0.25;
      animation: sparkle 1.2s ease-in-out infinite;
    }
    @keyframes sparkle{
      0%{ transform: translateY(-10px); opacity: 0.18; }
      50%{ transform: translateY(0px); opacity: 0.34; }
      100%{ transform: translateY(-10px); opacity: 0.18; }
    }

    .ticket{
      margin: 12px auto 12px;
      width: min(420px, 92%);
      border-radius: 20px;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.16);
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
      overflow:hidden;
      transform: translateY(10px) scale(0.98);
      opacity: 0;
    }
    .modal.reveal .ticket{
      animation: popIn 520ms cubic-bezier(.2,.9,.2,1) forwards;
    }
    @keyframes popIn{
      to { transform: translateY(0) scale(1); opacity: 1; }
    }
    .ticketTop{
      padding: 14px 14px 10px;
      background: linear-gradient(90deg, rgba(253,230,138,0.18), rgba(251,182,206,0.10), rgba(147,197,253,0.12));
      border-bottom: 1px dashed rgba(255,255,255,0.20);
    }
    .ticketTitle{
      margin:0;
      font-weight: 1000;
      font-size: 18px;
      letter-spacing: .2px;
    }
    .ticketSub{
      margin:6px 0 0;
      opacity:.9;
      font-weight: 760;
      font-size: 13px;
      line-height: 1.3;
    }
    .ticketBody{
      padding: 12px 14px 14px;
      text-align:left;
    }
    .ticketLine{
      display:flex;
      justify-content:space-between;
      gap: 10px;
      font-weight: 900;
      font-size: 13px;
      opacity: .92;
      padding: 6px 0;
      border-bottom: 1px solid rgba(255,255,255,0.10);
    }
    .ticketLine:last-child{ border-bottom: 0; }

    .small{
      font-size: 11px;
      opacity: .78;
      font-weight: 760;
      margin-top: 10px;
      line-height: 1.35;
    }

  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>
  <div class="snow" aria-hidden="true"></div>

  <div class="app">
    <header class="header">
      <div class="titleRow">
        <h1 class="hTitle">üíû Juego de Pareja</h1>
        <div class="pill">Regalo</div>
      </div>

      <p class="sub">
        <b>Descubre tu regalo</b> completando todos los juegos.> ‚ú®
      </p>

      <div class="progress" aria-label="Progreso de la aventura">
        <div class="progOuter" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="4">
          <div class="progInner" id="progFill"></div>
        </div>
        <div class="progText" id="progText">0/4</div>
      </div>
    </header>

    <section class="list" aria-label="Lista de juegos">

      <!-- 1) FUTBOL -->
      <article class="card" data-level="1" data-key="bm_done_futbol" data-prev="">
        <div class="thumb" style="background-image:url('assets/menu/futbol.jpg');"></div>
        <div class="shade"></div>
        <div class="cardInner">
          <div>
            <div class="tagRow">
              <div class="tag">üèñÔ∏è‚öΩ Nivel 1</div>
              <div class="state" data-state>Disponible</div>
            </div>
            <h2 class="cTitle">F√∫tbol en la Playa</h2>
            <p class="cDesc">Lucas + Valeria vs Coya + Emma. Dos joysticks, full teamwork üòºüê∂</p>
          </div>
          <div class="btnRow">
            <a class="btn" data-href="futbol_arena.html" href="futbol_arena.html">JUGAR</a>
          </div>
        </div>
      </article>

      <!-- 2) CARRETERA -->
      <article class="card" data-level="2" data-key="bm_done_carretera" data-prev="bm_done_futbol">
        <div class="thumb" style="background-image:url('assets/menu/carretera.jpg');"></div>
        <div class="shade"></div>
        <div class="cardInner">
          <div>
            <div class="tagRow">
              <div class="tag">üöó Nivel 2</div>
              <div class="state" data-state>Bloqueado üîí</div>
            </div>
            <h2 class="cTitle">Carretera de Caballos</h2>
            <p class="cDesc">Intro + esquiva caballos para llegar a Ba√±os Morales.</p>
          </div>
          <div class="btnRow">
            <a class="btn ghost" data-href="carretera.html" href="carretera.html">JUGAR</a>
          </div>
        </div>
      </article>

      <!-- 3) NIEVE -->
      <article class="card" data-level="3" data-key="bm_done_nieve" data-prev="bm_done_carretera">
        <div class="thumb" style="background-image:url('assets/menu/nieve.jpg');"></div>
        <div class="shade"></div>
        <div class="cardInner">
          <div>
            <div class="tagRow">
              <div class="tag">‚ùÑÔ∏è Nivel 3</div>
              <div class="state" data-state>Bloqueado üîí</div>
            </div>
            <h2 class="cTitle">Batalla de Nieve</h2>
            <p class="cDesc">Precisi√≥n + combos. Llega a 200 puntos para ganar ‚úÖ</p>
          </div>
          <div class="btnRow">
            <a class="btn ghost" data-href="bolas_nieve.html" href="bolas_nieve.html">JUGAR</a>
          </div>
        </div>
      </article>

      <!-- 4) LO VASQUEZ -->
      <article class="card" data-level="4" data-key="bm_done_vasquez" data-prev="bm_done_nieve">
        <div class="thumb" style="background-image:url('assets/menu/lo_vasquez.jpg');"></div>
        <div class="shade"></div>
        <div class="cardInner">
          <div>
            <div class="tagRow">
              <div class="tag">üö≤ Nivel 4</div>
              <div class="state" data-state>Bloqueado üîí</div>
            </div>
            <h2 class="cTitle">Lo V√°squez ‚Üí Valpo</h2>
            <p class="cDesc">Noche ‚Üí amanece ‚Üí feria laberinto ‚Üí Valpara√≠so y mar üåä</p>
          </div>
          <div class="btnRow">
            <a class="btn ghost" data-href="lo_vasquez.html" href="lo_vasquez.html">JUGAR</a>
          </div>
        </div>
      </article>

      <!-- GIFT -->
      <div class="giftCard" id="giftCard">
        <div class="giftGlow" aria-hidden="true"></div>
        <div class="giftRow">
          <div>
            <h3 class="giftTitle">üéÅ Descubrir regalo</h3>
            <div class="giftSub" id="giftSub">Completa los 4 juegos para desbloquearlo.</div>
          </div>
          <button class="giftBtn locked" id="giftBtn" type="button">BLOQUEADO üîí</button>
        </div>
      </div>


    </section>
  </div>

  <!-- Modal gen√©rico + Regalo -->
  <div class="overlay" id="overlay">
    <div class="modal" id="modal">
      <div class="sparkles" aria-hidden="true"></div>
      <h2 id="ovTitle">‚Äî</h2>
      <p id="ovText">‚Äî</p>

      <div class="ticket" id="ticket" aria-hidden="true">
        <div class="ticketTop">
          <h3 class="ticketTitle">üéüÔ∏è Vale Fantasilandia</h3>
          <div class="ticketSub">Para cuando t√∫ quieras ‚Äî con amor üíû</div>
        </div>
        <div class="ticketBody">
          <div class="ticketLine"><span>Beneficio</span><span>Entradas Fantasilandia</span></div>
          <div class="ticketLine"><span>Validez</span><span>Cuando t√∫ quieras</span></div>
          <div class="ticketLine"><span>Modo</span><span>En pareja ‚ú®</span></div>
        </div>
      </div>

      <button class="modalBtn" id="ovBtn">VOLVER</button>
    </div>
  </div>

  <script>
    // ====== Progreso & Bloqueos (localStorage) ======
    const KEYS = [
      'bm_done_futbol',
      'bm_done_carretera',
      'bm_done_nieve',
      'bm_done_vasquez'
    ];

    const overlay = document.getElementById('overlay');
    const modal   = document.getElementById('modal');
    const ovTitle = document.getElementById('ovTitle');
    const ovText  = document.getElementById('ovText');
    const ovBtn   = document.getElementById('ovBtn');

    const progFill = document.getElementById('progFill');
    const progText = document.getElementById('progText');

    const giftBtn = document.getElementById('giftBtn');
    const giftSub = document.getElementById('giftSub');
    const ticket  = document.getElementById('ticket');

    function isDone(k){ return localStorage.getItem(k) === '1'; }

    function openModal(title, text, mode){
      ovTitle.textContent = title;
      ovText.innerHTML = text;
      overlay.classList.add('on');

      // modes: 'info' | 'gift'
      modal.classList.remove('reveal');
      ticket.style.display = 'none';

      if (mode === 'gift'){
        ticket.style.display = 'block';
        // trigger animation
        setTimeout(()=> modal.classList.add('reveal'), 20);
      }
    }

    function closeModal(){
      overlay.classList.remove('on');
      modal.classList.remove('reveal');
    }

    overlay.addEventListener('click', (e)=>{ if (e.target === overlay) closeModal(); });
    ovBtn.addEventListener('click', closeModal);

    function refreshUI(){
      // Count done
      const doneCount = KEYS.reduce((acc,k)=> acc + (isDone(k)?1:0), 0);
      const total = KEYS.length;
      const pct = Math.round((doneCount/total)*100);

      progFill.style.width = pct + '%';
      progText.textContent = `${doneCount}/${total}`;

      // Lock logic (secuencial)
      document.querySelectorAll('.card[data-key]').forEach(card=>{
        const key = card.getAttribute('data-key');
        const prev = card.getAttribute('data-prev');
        const done = isDone(key);
        const unlocked = !prev || isDone(prev); // unlocked if previous completed (or first)

        const stateEl = card.querySelector('[data-state]');
        const btn = card.querySelector('.btn');

        card.classList.toggle('locked', !unlocked);

        if (done){
          stateEl.textContent = 'Completado ‚úÖ';
          btn.classList.remove('locked');
          btn.classList.remove('ghost');
          btn.textContent = 'JUGAR DE NUEVO';
        } else if (unlocked){
          stateEl.textContent = 'Disponible';
          btn.classList.remove('locked');
        } else {
          stateEl.textContent = 'Bloqueado üîí';
          btn.classList.add('locked');
        }

        // intercept click if locked
        btn.onclick = (e) => {
          if (!unlocked){
            e.preventDefault();
            openModal(
              'Bloqueado üîí',
              'Completen el nivel anterior para desbloquear este cap√≠tulo üíû',
              'info'
            );
          }
        };
      });

      // Gift unlock when all completed
      const allDone = KEYS.every(isDone);
      if (allDone){
        giftBtn.classList.remove('locked');
        giftBtn.textContent = 'DESCUBRIR ‚ú®';
        giftSub.textContent = '¬°Listo! Ya completaron todo. Toca para revelar üéÅ';
        giftBtn.onclick = () => {
          openModal(
            '¬°Felicidades! üíû',
            'Tu regalo es‚Ä¶<br><br><b>un vale para entradas de Fantasilandia cuando t√∫ quieras üé°üéüÔ∏è</b>',
            'gift'
          );
        };
      } else {
        giftBtn.classList.add('locked');
        giftBtn.textContent = 'BLOQUEADO üîí';
        giftSub.textContent = 'Completa los 4 juegos para desbloquearlo.';
        giftBtn.onclick = () => {
          openModal(
            'A√∫n no üëÄ',
            `Les falta completar <b>${(KEYS.length - doneCount)}</b> juego(s) para desbloquear el regalo ‚ú®`,
            'info'
          );
        };
      }
    }

    refreshUI();

    // Opcional: refresca cuando vuelves al tab
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden) refreshUI();
    });
  </script>
</body>
</html>
